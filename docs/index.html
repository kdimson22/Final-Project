<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kendall Dimson">

<title>PM 566 Final Project - Final Project: PM 566</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">PM 566 Final Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">Full Report</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#description" id="toc-description" class="nav-link active" data-scroll-target="#description">Description</a></li>
  <li><a href="#table-1-total-cases-of-vaccine-preventable-diseases-reported-in-california-2001-2022" id="toc-table-1-total-cases-of-vaccine-preventable-diseases-reported-in-california-2001-2022" class="nav-link" data-scroll-target="#table-1-total-cases-of-vaccine-preventable-diseases-reported-in-california-2001-2022">Table 1: Total Cases of Vaccine-Preventable Diseases Reported in California, 2001-2022</a></li>
  <li><a href="#figure-1-bubble-map-of-total-number-of-pertussis-cases-in-california-2001-2022" id="toc-figure-1-bubble-map-of-total-number-of-pertussis-cases-in-california-2001-2022" class="nav-link" data-scroll-target="#figure-1-bubble-map-of-total-number-of-pertussis-cases-in-california-2001-2022">Figure 1: Bubble Map of Total Number of Pertussis cases in California (2001-2022)</a></li>
  <li><a href="#figure-2-trends-of-pertussis-incidence-in-los-angeles-2001-2022" id="toc-figure-2-trends-of-pertussis-incidence-in-los-angeles-2001-2022" class="nav-link" data-scroll-target="#figure-2-trends-of-pertussis-incidence-in-los-angeles-2001-2022">Figure 2: Trends of Pertussis Incidence in Los Angeles (2001-2022)</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final Project: PM 566</h1>
<p class="subtitle lead">University of Southern California, Fall 2024</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kendall Dimson </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="description" class="level2">
<h2 class="anchored" data-anchor-id="description">Description</h2>
<p>Welcome to my PM 566 final project website, on the topic: “Analysing Rates and Trends of Vaccine Preventable Diseases in California, by County (2001-2022).</p>
<p>This project uses data from the California Department of Public Health (CDPH) and the Center for Disease Control and Prevention (CDC) to analyse trends of vaccine-preventable diseases in California. Vaccine-preventable diseases, as in the term name, are infectious diseases that can be prevented by vaccines. Common examples include: COVID-19, Whooping Cough (Pertussis), Measles, and Tuberculosis.</p>
<p>There are three main topics covered in this project:</p>
<ol type="1">
<li>The project focuses on identifying previous vaccine-preventable disease epidemics in California. An epidemic is defined as “the occurrence of more cases of disease than expected in a given area or among a specific group of people over a particular period of time” (CDC).</li>
<li>After identifying the vaccine-preventable disease with the highest total number of new cases over the years, the project investigated the distribution of the disease across California counties, adjusting for population density. Did the number of new cases vary in different regions? (This is to be explored in the full report)</li>
<li>One of the main influential factors to the rise of new cases of vaccine-preventable disease is vaccine hesitancy. When regions do not have a high percentage of people vaccinated, then the community is susceptible to new infections of such vaccine-preventable cases. An example is with Measles, a highly infectious disease that can be prevented with the MMR vaccine. In recent years, regions throughout the U.S. have seen outbreaks of measle cases in regions with a lower vaccination rate. This project investigates if there is an association between vaccine hesitancy and new cases of vaccine-preventable diseases in California counties.</li>
</ol>
</section>
<section id="table-1-total-cases-of-vaccine-preventable-diseases-reported-in-california-2001-2022" class="level2">
<h2 class="anchored" data-anchor-id="table-1-total-cases-of-vaccine-preventable-diseases-reported-in-california-2001-2022">Table 1: Total Cases of Vaccine-Preventable Diseases Reported in California, 2001-2022</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Disease</th>
<th style="text-align: right;">Total Cases</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Pertussis</td>
<td style="text-align: right;">57219</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hepatitis B, Chronic</td>
<td style="text-align: right;">4462</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hepatitis A</td>
<td style="text-align: right;">3035</td>
</tr>
<tr class="even">
<td style="text-align: left;">Invasive Meningococcal Disease</td>
<td style="text-align: right;">2718</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hepatitis B, Acute</td>
<td style="text-align: right;">1349</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mumps</td>
<td style="text-align: right;">1108</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hepatitis C, Acute</td>
<td style="text-align: right;">1050</td>
</tr>
<tr class="even">
<td style="text-align: left;">Measles</td>
<td style="text-align: right;">521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Varicella Hospitalizations</td>
<td style="text-align: right;">406</td>
</tr>
<tr class="even">
<td style="text-align: left;">Varicella Hospitalization/Death</td>
<td style="text-align: right;">93</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tetanus</td>
<td style="text-align: right;">86</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rubella</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Diphtheria</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="figure-1-bubble-map-of-total-number-of-pertussis-cases-in-california-2001-2022" class="level2">
<h2 class="anchored" data-anchor-id="figure-1-bubble-map-of-total-number-of-pertussis-cases-in-california-2001-2022">Figure 1: Bubble Map of Total Number of Pertussis cases in California (2001-2022)</h2>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-9016375ac0d6a2a96fa3" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9016375ac0d6a2a96fa3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[37.601,38.3652,38.397,39.4739,38.2009,39.2068,38.0016,41.7469,38.742,36.747,39.5051,40.6765,32.6654,36.5784,35.4875,36.0945,38.9682,40.5832,34.0522,null,38.0449,37.4875,39.4502,37.302,41.5572,37.95,36.6777,38.2975,39.2199,33.7175,39.091,39.9724,33.9533,38.5816,36.5772,34.1083,32.7157,37.7749,37.9563,35.3733,37.5631,34.4208,37.3541,36.9741,40.7906,39.5272,41.4936,38.2494,38.5004,37.4959,39.0194,40.0982,40.6542,36.14,38.0291,34.3705,38.7647,39.1345],[-122.2727,-119.8489,-120.608,-121.8076,-120.5606,-122.0015,-121.8058,-124.1018,-120.5351,-119.7724,-122.174,-124.1958,-115.3746,-116.2028,-118.8597,-119.8817,-122.8008,-120.6548,-118.2437,null,-122.5156,-119.9309,-123.806,-120.4844,-120.542,-118.956,-121.6555,-122.2869,-120.5734,-117.831,-120.8055,-120.4841,-117.3962,-121.4944,-121.5025,-116.581,-117.1611,-122.4194,-121.3134,-120.6544,-122.371,-119.6982,-121.9552,-121.9552,-122.464,-119.589,-122.454,-122.0364,-122.4064,-120.845,-121.6656,-122.43,-123.1382,-118.8597,-120.237,-119.1396,-121.9018,-121.5885],[26.2011450131478,0,3.122498999199199,6.946221994724902,4.358898943540674,2.179449471770337,19.95620204347511,2.598076211353316,8.062257748298549,23.87467277262665,1.58113883008419,10.2469507659596,4.873397172404482,3.354101966249685,16.85971530008737,4.898979485566356,3.570714214271425,1.6583123951777,52.3354564325181,9.974968671630002,18.8878267675241,2.549509756796392,5.522680508593631,8.631338250816034,1.58113883008419,3.3166247903554,13.73863166403409,9.394147114027968,8.587782018658833,26.23928352680385,13.5092560861063,2.06155281280883,23.14627399820541,23.53720459187964,4.272001872658765,15.94521871910197,49.39382552505931,14.15097169808491,12.52996408614167,13.83835250309805,17.5,11.35781669160055,27.9240040108864,17.60681686165901,6.652067347825035,0,3.201562118716424,10.75871739567501,21.11871208194287,13.15294643796591,2.958039891549808,3.968626966596886,2.5,13.2664991614216,4.415880433163924,20.18043607061056,12.93251715637756,4.272001872658765],null,null,{"interactive":true,"className":"","stroke":true,"color":"green","weight":1,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.5},null,null,["Alameda :  2746  cases","Alpine :  0  cases","Amador :  39  cases","Butte :  193  cases","Calaveras :  76  cases","Colusa :  19  cases","Contra Costa :  1593  cases","Del Norte :  27  cases","El Dorado :  260  cases","Fresno :  2280  cases","Glenn :  10  cases","Humboldt :  420  cases","Imperial :  95  cases","Inyo :  45  cases","Kern :  1137  cases","Kings :  96  cases","Lake :  51  cases","Lassen :  11  cases","Los Angeles :  10956  cases","Madera :  398  cases","Marin :  1427  cases","Mariposa :  26  cases","Mendocino :  122  cases","Merced :  298  cases","Modoc :  10  cases","Mono :  44  cases","Monterey :  755  cases","Napa :  353  cases","Nevada :  295  cases","Orange :  2754  cases","Placer :  730  cases","Plumas :  17  cases","Riverside :  2143  cases","Sacramento :  2216  cases","San Benito :  73  cases","San Bernardino :  1017  cases","San Diego :  9759  cases","San Francisco :  801  cases","San Joaquin :  628  cases","San Luis Obispo :  766  cases","San Mateo :  1225  cases","Santa Barbara :  516  cases","Santa Clara :  3119  cases","Santa Cruz :  1240  cases","Shasta :  177  cases","Sierra :  0  cases","Siskiyou :  41  cases","Solano :  463  cases","Sonoma :  1784  cases","Stanislaus :  692  cases","Sutter :  35  cases","Tehama :  63  cases","Trinity :  25  cases","Tulare :  704  cases","Tuolumne :  78  cases","Ventura :  1629  cases","Yolo :  669  cases","Yuba :  73  cases"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[32.6654,41.7469],"lng":[-124.1958,-115.3746]},"setView":[[36.7783,-119.4179],6,[]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="figure-2-trends-of-pertussis-incidence-in-los-angeles-2001-2022" class="level2">
<h2 class="anchored" data-anchor-id="figure-2-trends-of-pertussis-incidence-in-los-angeles-2001-2022">Figure 2: Trends of Pertussis Incidence in Los Angeles (2001-2022)</h2>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-9f2078f3576ab7082e91" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9f2078f3576ab7082e91">{"x":{"data":[{"x":[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[113,183,141,175,491,160,72,84,172,1395,643,216,365,2206,1184,326,581,509,1712,97,45,86],"text":["Year: 2001<br />Total_Cases:  113","Year: 2002<br />Total_Cases:  183","Year: 2003<br />Total_Cases:  141","Year: 2004<br />Total_Cases:  175","Year: 2005<br />Total_Cases:  491","Year: 2006<br />Total_Cases:  160","Year: 2007<br />Total_Cases:   72","Year: 2008<br />Total_Cases:   84","Year: 2009<br />Total_Cases:  172","Year: 2010<br />Total_Cases: 1395","Year: 2011<br />Total_Cases:  643","Year: 2012<br />Total_Cases:  216","Year: 2013<br />Total_Cases:  365","Year: 2014<br />Total_Cases: 2206","Year: 2015<br />Total_Cases: 1184","Year: 2016<br />Total_Cases:  326","Year: 2017<br />Total_Cases:  581","Year: 2018<br />Total_Cases:  509","Year: 2019<br />Total_Cases: 1712","Year: 2020<br />Total_Cases:   97","Year: 2021<br />Total_Cases:   45","Year: 2022<br />Total_Cases:   86"],"type":"scatter","mode":"lines+markers","line":{"width":5.6692913385826778,"color":"rgba(221,160,221,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(221,160,221,1)","opacity":1,"size":11.338582677165356,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(221,160,221,1)"}},"frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":48.949771689497723},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Trend of Pertussis Cases in Los Angeles per Year","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1999.95,2023.05],"tickmode":"array","ticktext":["2000","2005","2010","2015","2020"],"tickvals":[2000,2005,2010,2015,2020],"categoryorder":"array","categoryarray":["2000","2005","2010","2015","2020"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-63.050000000000011,2314.0500000000002],"tickmode":"array","ticktext":["0","500","1000","1500","2000"],"tickvals":[0,499.99999999999994,1000,1500,2000.0000000000002],"categoryorder":"array","categoryarray":["0","500","1000","1500","2000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Total Cases","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"35793f29692b":{"x":{},"y":{},"type":"scatter"},"357937b7a672":{"x":{},"y":{}}},"cur_data":"35793f29692b","visdat":{"35793f29692b":["function (y) ","x"],"357937b7a672":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>